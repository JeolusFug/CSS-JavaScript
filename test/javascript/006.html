<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>006</title>
</head>

<body>
    <script>
        // 함수를 사용하는 법은 함수를 정의한 후에 함수 이름을 불러 실행한다.
        // function 함수명() {} 과 같이 사용한다.
        // 정의된 함수는 함수명을 부를 때 마다 해당 함수를 실행할 수 있다.

        // 변수를 지정할 때 변수가 어디까지 유효한지의 범위를 scope 라고 한다.

        function addNumber() {
            var sum = 10 + 20;
            console.log(sum);
        }
        addNumber();
        // 위와 같이 사용하면 콘솔 로그에 sum이 나온다.
        // 이때 sum 변수를 지역변수(함수 안의 변수) 라고 한다

        // function addNumber2() {
        //     var sum2 = 10 + 20;
        // }
        // addNumber2();
        // console.log(sum2);

        // 이렇게 콘솔.로그를 함수 밖으로 빼버리면 에러가 발생한다.
        // 지역 변수를 함수 바깥에서 불렀기 때문에 sum2를 정의하라는 오류가 발생한다.
        // 이럴때에는 sum2를 var를 사용하지 않고 정의하면 sum2는 함수 안에 있지만 전역변수가 된다.


        function addNumber2() {
            sum2 = 10 + 20;
        }
        addNumber2();
        console.log(sum2);
        // 위와 같이 이때까지는 전역변수로 사용하기 위해서는 var를 쓰지 않고 변수를 선언하거나 함수 바깥에서 var를 사용하여 변수를 선언해야 했었다.

        // 실수로 var를 사용하지 않고 전역변수로 정의하고, 함수 바깥에서 변수값을 바꾸는 등의 실수가 발생했다. 이게 var이 가지는 단점이다.


        function addNumber3() {
            var sum3 = 10 + 20;
        }
        addNumber3();
        console.log(sum3);
        // 또 다른 단점은 var로 선언된 변수는 재선언이 가능하다는 점이다.
        // 위와 같이 sum3을 함수 안에서 선언하였지만
        var sum3;
        sum3 = 111;
        // 위와 같이 새로운 sum3을 var로 선언할 수 있고, 여기에 값을 넣고 확인하면 첫 로그는 당연하게 30이 나오지만, 다시 변수를 확인했을때는 111이라는 값이 나온다.
        // 이렇게 변수가 재선언 된다는 것은 큰 단점이다.
        // 웹개발의 특성상 팀으로 개발하는 편이 많은데, 여러 사람이 소스를 작성해서 모아 완성하는 경우가 많은대, 변수 이름이 겹치는 상황이 발생한다면 큰 문제가 된다.

        var x = 10;

        function displayNumber() {
            console.log("X is " + x);
            console.log("Y is " + y);
            // 이때 y는 아직 변수 선언이 되지 않았다.
            var y = 20;
        }
        // 로그 명령 후 변수 y가 선언되었다.
        // 이를 실행해서 로그를 확인해보면 오류가 발생하는 것이 아니라 y is undefined 라고 나온다.
        // 오류가 발생해야 하지만 오류가 발생하지 않고 002에서 공부한 자료형 중 하나인 아직 정의되지 않은 형태인 undefined가 y 값이 된다.
        // 자바 스크립트에는 호이스팅이라고 하여 console.log(Y~)에서는 아직 정의되지 않은 변수 y를 이미 정의된 변수인것 처럼 끌어 올려서 사용한다는 것이다.
        // var x = 10; 의 다음 줄에 var y;가 선언되어 있고, console.log(Y~)문 전에 y = 20; 이라는 값이 들어가 있다고 생각한다. 이것이 호이스팅이다.
        // 이 호이스팅은 변수뿐만 아니라 함수에도 적용이 된다.

        // 보통 깔끔한 코드를 위해 함수를 정의한 부분은 코드의 가장 아래에 놓고, 함수명만 필요할때 불러서 사용하는 경우가 많았다고 한다. 이렇게 되면 함수는 정의되지 않았는데 함수를 호출하는 형태가 되는대 이때 정의되지 않은것이 아니라 정의되어있는것 처럼 실행이 된다. 이것이 함수에서의 호이스팅이다.

        // 이러한 단점들 때문에 자바 스크립트에서는 var가 아닌 let를 사용하여 변수를 선언하는게 권장된다.
        // let를 사용하여 선언한 변수는 블록단위로, 함수안에서 선언시 함수 안에서만 사용이 가능하다.
        // scope가 명확해진것이다.

        function cal(n) {
            let sum4 = 0;
            for (let i = 1; i < n + 1; i++) {
                sum4 += i;
            }
            console.log(sum4);
        }

        cal(10);
        // 위에서 처럼 sum4은 cal이라는 함수 안에서만 사용 가능하고 let i 변수는 for문 안에서만 사용이 가능하다.
        // 또 let으로 선언된 변수는 재선언이 불가능하다.
        // 함수 밖에서 같은 이름을 선언하는 것은 가능하지만, 함수 안에서 같은 이름의 변수 선언이 불가능하다.

        
        let x2 = 10;

        function displayNumber() {
            console.log("X is " + x2);
            console.log("Y is " + y2);
            // 이때 y는 아직 변수 선언이 되지 않았다.
            let y2 = 20;
        }
        // let를 사용하여 변수를 선언한 경우 위의 함수를 실행하면 오류가 발생한다. y2를 초기화하라는 오류가 발생한다.
        // var에서의 호이스팅이 let에서는 발생하지 않는다는 차이점이 있다.

        // 또다른 선언방법인 const가 있는대 이것은 상수(변하지 않는 값)을 선언할 때 사용한다.
        // 재선언, 재할당을 할 수 없는 특징을 가지고 있다.

        // 자바 스크립트 변수의 사용법
        // 1. 전역 변수는 최소한으로 사용한다.
        // 2. var 변수는 함수의 시작 부분에서 선언한다.
        // 3. for 문에서 카운터 변수는 var보다 let 변수로 선언한다
        // 4. ES6를 사용한다면 var보다 let를 사용하는 것이 좋다.
    </script>
</body>

</html>